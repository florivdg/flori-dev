---
import { Picture } from 'astro:assets'

interface Props {
  src: string
  alt: string
  caption?: string
  skew?: boolean
  lazy?: boolean
}

const { src, alt, skew: userSkew, caption, lazy: userLazy } = Astro.props
const skew: boolean = userSkew ?? true
const lazy: boolean = userLazy ?? true
---

<figure>
  <Picture
    src={src}
    alt={alt}
    sizes="(min-width: 768px) 650px, 360px"
    widths={[360, 720, 1440, 1950]}
    width={1500}
    height={1000}
    class={skew ? '-rotate-1 -skew-x-3 rounded-lg shadow-lg' : undefined}
    loading={lazy ? 'lazy' : 'eager'}
  />
  {caption ? <figcaption class="!-mt-[1em]">{caption}</figcaption> : undefined}
</figure>
